/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var y=Object.defineProperty;var D=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var T=Object.prototype.hasOwnProperty;var k=(c,s)=>{for(var e in s)y(c,e,{get:s[e],enumerable:!0})},S=(c,s,e,t)=>{if(s&&typeof s=="object"||typeof s=="function")for(let i of x(s))!T.call(c,i)&&i!==e&&y(c,i,{get:()=>s[i],enumerable:!(t=D(s,i))||t.enumerable});return c};var L=c=>S(y({},"__esModule",{value:!0}),c);var V={};k(V,{DEFAULT_SETTINGS:()=>E,DoubleClickNonNativeSettingTab:()=>m,DummyFileView:()=>d,VIEW_TYPE_DUMMY:()=>u,default:()=>v});module.exports=L(V);var g=require("obsidian");var E={doubleClickDelay:300,enableForAllFiles:!0,enableDummyView:!0},u="dummy-file-view";var p=require("obsidian");var d=class extends p.FileView{constructor(s){super(s)}getViewType(){return u}getDisplayText(){return this.file?this.file.basename:"Non-native file"}getIcon(){return"file"}async onLoadFile(s){let{contentEl:e}=this;e.empty();let t=e.createDiv({cls:"dummy-file-container"}),i=t.createEl("div",{text:s.name,cls:"inline-title"}),l=t.createDiv({cls:"dummy-file-info"});l.createEl("p",{text:`File type: ${s.extension.toUpperCase()} file`}),l.createEl("p",{text:`Size: ${this.formatFileSize(s.stat.size)}`}),l.createEl("p",{text:`Created: ${new Date(s.stat.ctime).toLocaleString()}`}),l.createEl("p",{text:`Modified: ${new Date(s.stat.mtime).toLocaleString()}`});let n=t.createDiv({cls:"callout",attr:{"data-callout":"warning","data-callout-metadata":"","data-callout-fold":""}}),a=n.createDiv({cls:"callout-title"});a.setAttribute("dir","auto");let o=a.createDiv({cls:"callout-icon"});(0,p.setIcon)(o,"alert-triangle");let r=a.createDiv({cls:"callout-title-inner",text:"Unsupported file"}),f=n.createDiv({cls:"callout-content"}).createEl("p");f.setAttribute("dir","auto"),f.textContent="This file type cannot be viewed in Obsidian.";let b=t.createDiv({cls:"dummy-file-actions"});b.createEl("button",{text:"Open in default app",cls:"mod-cta"}).addEventListener("click",()=>{try{this.app.openWithDefaultApp(s.path)}catch(F){console.error("Failed to open file in default app:",F)}}),this.isSidecarsPluginEnabled()&&b.createEl("button",{text:"Open sidecar",cls:"mod-secondary"}).addEventListener("click",async()=>{await this.openSidecar(s)})}isSidecarsPluginEnabled(){var s,e;return((e=(s=this.app.plugins)==null?void 0:s.enabledPlugins)==null?void 0:e.has("sidecars"))||!1}getSidecarSuffix(){var e,t,i;let s=(t=(e=this.app.plugins)==null?void 0:e.plugins)==null?void 0:t.sidecars;return(i=s==null?void 0:s.settings)!=null&&i.sidecarSuffix?s.settings.sidecarSuffix:"side"}async openSidecar(s){let e=this.getSidecarSuffix(),t=`${s.path}.${e}.md`;try{let i=this.app.vault.getAbstractFileByPath(t);if(!i){new p.Notice(`Couldn't find ${s.basename}.${e}.md`);return}i instanceof p.TFile&&await this.app.workspace.getLeaf(!1).openFile(i)}catch(i){console.error("Failed to open sidecar file:",i),new p.Notice(`Failed to open sidecar file: ${s.basename}.${e}.md`)}}formatFileSize(s){if(s===0)return"0 Bytes";let e=1024,t=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(s)/Math.log(e));return parseFloat((s/Math.pow(e,i)).toFixed(2))+" "+t[i]}async onClose(){}};var h=require("obsidian"),m=class extends h.PluginSettingTab{constructor(e,t){super(e,t);this.plugin=t}display(){let{containerEl:e}=this;e.empty(),new h.Setting(e).setName("Double-click timeout").setDesc("Time in milliseconds to wait for a second click to register as a double-click.").addText(t=>t.setPlaceholder("300").setValue(this.plugin.settings.doubleClickDelay.toString()).onChange(async i=>{let l=parseInt(i);!isNaN(l)&&l>0&&(this.plugin.settings.doubleClickDelay=l,await this.plugin.saveSettings())})),new h.Setting(e).setName("Enable double-click for all files").setDesc("When enabled, double-clicking any file (including native Obsidian files like .md) will open it in the default application.").addToggle(t=>t.setValue(this.plugin.settings.enableForAllFiles).onChange(async i=>{this.plugin.settings.enableForAllFiles=i,await this.plugin.saveSettings()})),new h.Setting(e).setName("Enable dummy view for non-native files").setDesc('When enabled, single-clicking non-native files will open them in a dummy view within Obsidian instead of just selecting them. This makes the file appear "active" in the workspace while still providing access to open in default app.').addToggle(t=>t.setValue(this.plugin.settings.enableDummyView).onChange(async i=>{this.plugin.settings.enableDummyView=i,await this.plugin.saveSettings()}))}};var v=class extends g.Plugin{constructor(){super(...arguments);this.clickTimeouts=new Map;this.fileExplorerView=null}async onload(){await this.loadSettings(),this.registerView(u,e=>new d(e)),this.app.workspace.onLayoutReady(()=>{var e;this.fileExplorerView=(e=this.app.workspace.getLeavesOfType("file-explorer")[0])==null?void 0:e.view}),this.registerDomEvent(document,"click",this.handleFileClick.bind(this),!0),this.registerDomEvent(document,"mousedown",this.handleFileMouseDown.bind(this),!0),this.addSettingTab(new m(this.app,this))}onunload(){this.clickTimeouts.forEach(e=>clearTimeout(e)),this.clickTimeouts.clear()}async loadSettings(){this.settings=Object.assign({},E,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}handleFileClick(e){let t=e.target;if(e.altKey||e.shiftKey)return;let i=t.closest(".nav-file");if(!i)return;let l=i.querySelector(".nav-file-title");if(!l)return;let n=l.getAttribute("data-path");if(!n)return;let a=l.classList.contains("is-unsupported");if(!a&&!this.settings.enableForAllFiles){this.clearSelections(!0),this.setActiveFile(n);return}this.deselectAllFiles();let o=n;if(this.clickTimeouts.has(o))clearTimeout(this.clickTimeouts.get(o)),this.clickTimeouts.delete(o),(this.settings.enableForAllFiles||a)&&(e.preventDefault(),e.stopPropagation(),this.openFileInDefaultApp(n));else if(!a&&this.settings.enableForAllFiles){this.setActiveFile(n);let r=window.setTimeout(()=>{this.clickTimeouts.delete(o)},this.settings.doubleClickDelay);this.clickTimeouts.set(o,r)}else{e.preventDefault(),e.stopPropagation(),this.settings.enableDummyView?this.openFileInDummyView(n):this.selectFile(i);let r=window.setTimeout(()=>{this.clickTimeouts.delete(o)},this.settings.doubleClickDelay);this.clickTimeouts.set(o,r)}}handleFileMouseDown(e){if(!e.target.closest(".nav-file"))return;let i=document.querySelector(".nav-files-container");i&&i.querySelectorAll(".nav-file-title.has-focus").forEach(l=>l.classList.remove("has-focus"))}clearSelections(e=!0){var n;if(!((n=this.fileExplorerView)!=null&&n.tree))return;let t=this.fileExplorerView.tree,i=e?null:t.activeDom,l=e?null:t.focusedItem;if(t.selectedDoms.forEach(a=>{a.el&&a.el.classList.remove("is-selected"),a.selfEl&&(a.selfEl.classList.remove("is-selected"),e&&a.selfEl.classList.remove("has-focus"))}),t.selectedDoms.clear(),e){let a=document.querySelector(".nav-files-container");a&&a.querySelectorAll(".tree-item-self.nav-file-title.has-focus, .nav-file-title.has-focus").forEach(r=>r.classList.remove("has-focus"))}!e&&i?(t.activeDom=i,t.focusedItem=l):e&&(t.activeDom&&(t.activeDom=null),t.focusedItem&&(t.focusedItem=null))}deselectAllFiles(){this.clearSelections(!1)}setActiveFile(e){var t,i;if((t=this.fileExplorerView)!=null&&t.fileItems&&((i=this.fileExplorerView)!=null&&i.tree)){let l=this.fileExplorerView.tree,n=this.fileExplorerView.fileItems[e];n&&(l.activeDom=n,l.focusedItem=n)}}selectFile(e){var l,n;let t=e.querySelector(".nav-file-title");if(!t)return;let i=t.getAttribute("data-path");if(i){if((l=this.fileExplorerView)!=null&&l.fileItems&&((n=this.fileExplorerView)!=null&&n.tree)){let a=this.fileExplorerView.tree,o=this.fileExplorerView.fileItems[i];o&&(a.activeDom=o,a.focusedItem=o)}t.classList.add("has-focus")}}async openFileInDummyView(e){var i,l,n;if(this.app.vault.getAbstractFileByPath(e)instanceof g.TFile)try{let a=this.app.workspace.getLeavesOfType(u),o;for(let f of a)if(await this.app.workspace.revealLeaf(f),f.view instanceof d&&((i=f.view.file)==null?void 0:i.path)===e){o=f;break}let r;o?(r=o,this.app.workspace.setActiveLeaf(r)):(r=this.app.workspace.getLeaf(!1),await r.setViewState({type:u,state:{file:e}}));let w=(l=document.querySelector(`[data-path="${e}"]`))==null?void 0:l.closest(".nav-file");w&&this.selectFile(w)}catch(a){console.error("Failed to open file in dummy view:",a);let o=(n=document.querySelector(`[data-path="${e}"]`))==null?void 0:n.closest(".nav-file");o&&this.selectFile(o)}}async openFileInDefaultApp(e){let t=this.app.vault.getAbstractFileByPath(e);if(t instanceof g.TFile)try{this.app.openWithDefaultApp(t.path)}catch(i){console.error("Failed to open file in default app:",i),await this.app.workspace.getLeaf(!1).openFile(t)}}};

/* nosourcemap */